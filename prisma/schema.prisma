generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model actividades {
  actID               Int                   @id @default(autoincrement())
  RunnerUID           String                @db.VarChar(36)
  plataforma          String                @db.Char(1)
  titulo              String                @db.VarChar(150)
  fechaActividad      DateTime              @db.DateTime(0)
  DistanciaKM         Decimal               @db.Decimal(6, 2)
  RitmoMinKm          String                @db.VarChar(10)
  Duracion            String                @db.VarChar(10)
  Origen              String                @db.VarChar(20)
  Ciudad              String                @db.VarChar(20)
  Pais                String                @db.VarChar(20)
  enlace              String                @db.VarChar(255)
  fecha_inicio        DateTime?             @db.DateTime(0)
  fecha_fin           DateTime?             @db.DateTime(0)
  duracion_segundos   Int?
  duracion_formateada String?               @db.VarChar(10)
  distancia           Decimal?              @db.Decimal(6, 2)
  ritmo               String?               @db.VarChar(10)
  frecuencia_promedio Int?
  frecuencia_maxima   Int?
  cadencia            Int?
  calorias            Int?
  zona_activa         Int?
  tipo_actividad      String?               @db.VarChar(20)
  fecha_registro      DateTime?             @db.DateTime(0)
  actividad_ruta      actividad_ruta[]
  actividad_ubicacion actividad_ubicacion[]
  actividad_zonas     actividad_zonas[]

  @@map("actividades")
}

model sec_users {
  RunnerUID                String    @default(uuid()) @db.Char(36)
  RunnerUIDRef             String?   @db.Char(36)
  AliasRunner              String?   @db.VarChar(50)
  DisciplinaPrincipal      String?   @db.Char(1)
  name                     String    @db.VarChar(255)
  login                    String    @id @db.VarChar(255)
  phone                    String    @db.VarChar(65)
  email                    String    @db.VarChar(255)
  pswd                     String    @db.VarChar(255)
  RFC                      String?   @db.VarChar(13)
  TipoMembresia            String?   @db.Char(1)
  FechaUltimaActividad     DateTime? @db.DateTime(0)
  FechaRegistro            DateTime  @default(now()) @db.Timestamp(0)
  FechaActualizacion       DateTime  @default(now()) @updatedAt @db.Timestamp(0)
  InvitacionesTotales      Int?      @default(0)
  SuscripcionMXN           Decimal?  @db.Decimal(10, 2)
  WalletPuntos             Int?
  WalletPuntosI            Int?
  WalletSaldoMXN           Decimal?  @default(0.00) @db.Decimal(10, 2)
  GananciasAcumuladasMXN   Decimal?  @default(0.00) @db.Decimal(10, 2)
  InvitacionesMensuales    Int?      @default(0)
  PorcentajeCumplimiento   Decimal?  @default(0.00) @db.Decimal(5, 2)
  NivelRunner              String?   @db.Char(1)
  FechaRenovacionMembresia DateTime? @db.Date
  CFDIEmitido              Boolean?  @default(false)
  StravaAthleteID          BigInt?
  GarminUserID             String?   @db.VarChar(64)
  Z2TotalHistorico         BigInt?   @default(0)
  Z2Recibidas30d           Int?      @default(0)
  Z2Otorgadas30d           Int?      @default(0)
  Actividades30d           Int?      @default(0)
  NivelMensual             String?   @db.VarChar(10)
  FechaUltimaZ2            DateTime? @db.DateTime(0)
  fechaNacimiento          DateTime? @db.Date
  Genero                   String?   @db.Char(1)
  Peso                     String?   @db.Char(2)
  Estatura                 String?   @db.Char(3)
  Ciudad                   String?   @db.VarChar(50)
  Estado                   String?   @db.VarChar(50)
  Pais                     String?   @db.VarChar(50)
  EmergenciaContacto       String?   @db.VarChar(255)
  EmergenciaCelular        String?   @db.Char(64)
  EmergenciaParentesco     String?   @db.Char(64)
  equipoID                 String?   @db.VarChar(36)
  active                   String?   @db.VarChar(1)
  activation_code          String?   @db.VarChar(32)
  priv_admin               String?   @db.VarChar(1)
  mfa                      String?   @db.VarChar(255)
  picture                  Bytes?    @db.MediumBlob
  role                     String?   @db.VarChar(128)
  pswd_last_updated        DateTime? @default(now()) @updatedAt @db.Timestamp(0)
  mfa_last_updated         DateTime? @default(now()) @db.DateTime(0)

  @@map("sec_users")
}

model zonas {
  zonaID       Int      @id @default(autoincrement())
  RunnerUID    String   @db.VarChar(36)
  RunnerUIDRef String   @db.VarChar(36)
  puntos       Int
  motivo       String   @db.Char(2)
  origen       String   @db.Char(2)
  fecha        DateTime @db.DateTime(0)

  @@map("zonas")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model establecimientos {
  OrgID                        Int                      @id @default(autoincrement()) @db.UnsignedInt
  NombreComercial              String                   @db.VarChar(255)
  Giro                         String?                  @db.VarChar(150)
  Descripcion                  String?                  @db.VarChar(255)
  Ciudad                       String?                  @db.VarChar(100)
  Estado                       String?                  @db.VarChar(100)
  Pais                         String?                  @default("México") @db.VarChar(100)
  Direccion                    String?                  @db.VarChar(255)
  Latitud                      Decimal?                 @db.Decimal(10, 7)
  Longitud                     Decimal?                 @db.Decimal(10, 7)
  UrlSitio                     String?                  @db.VarChar(500)
  UrlLogo                      String?                  @db.VarChar(500)
  AceptaPuntosZ2               Boolean                  @default(true)
  MaxPuntosZ2                  Int?                     @db.UnsignedInt
  MaxDescuentoZ2               Int?                     @db.UnsignedInt
  PuntosEquivalencia           Int?                     @db.UnsignedInt
  EquivalenciaDescuentoImporte Decimal?                 @db.Decimal(10, 2)
  Estatus                      establecimientos_Estatus @default(pendiente)
  FechaAlta                    DateTime?                @default(now()) @db.Timestamp(0)
  FechaActualiza               DateTime?                @default(now()) @db.Timestamp(0)

  @@map("establecimientos")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model eventos {
  EventoID             Int      @id @default(autoincrement()) @db.UnsignedInt
  OrgID                Int      @db.UnsignedInt
  Titulo               String   @db.VarChar(255)
  Subtitulo            String?  @db.MediumText
  TipoEvento           String?  @default("Carrera") @db.LongText
  Distancias           String?  @db.LongText
  Categorias           String?  @db.LongText
  FechaEvento          DateTime @db.Date
  HoraEvento           DateTime @db.Time(0)
  Ciudad               String?  @db.VarChar(100)
  Estado               String?  @db.VarChar(100)
  Pais                 String?  @db.VarChar(100)
  Lugar                String?  @db.VarChar(255)
  UrlMapa              String?  @db.VarChar(500)
  UrlCalendario        String?  @db.VarChar(500)
  imagen               Bytes?   @db.MediumBlob
  UrlImagen            String?  @db.VarChar(500)
  UrlRegistro          String?  @db.VarChar(500)
  UrlPagoDirecto       String?  @db.VarChar(500)
  MaxPuntosZ2          Int?     @db.UnsignedInt
  MaxDescuentoZ2       Int?     @db.UnsignedInt
  PuntosEquivalencia   Int?     @db.UnsignedInt
  DescuentoImporte     Decimal? @db.Decimal(10, 2)
  editCartaExoneracion String?  @db.LongText
  UrlCartaExoneracion  String?  @db.VarChar(255)
  editGuiaExpectador   String?  @db.LongText
  GuiaExpectador       String?  @db.VarChar(255)
  PrecioEvento         Decimal? @db.Decimal(10, 2)
  Moneda               String?  @default("MXN") @db.Char(3)
  FechaAlta            DateTime @default(now()) @db.Timestamp(0)
  Estatus              String   @db.VarChar(20)
  FechaActualiza       DateTime @default(now()) @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model organizadores {
  OrgID               Int                   @id @default(autoincrement()) @db.UnsignedInt
  RunnerUID           String?               @db.VarChar(36)
  NombreComercial     String                @db.VarChar(255)
  RazonSocial         String?               @db.VarChar(255)
  RFC                 String?               @db.VarChar(13)
  ContactoNombre      String?               @db.VarChar(150)
  ContactoEmail       String?               @db.VarChar(150)
  ContactoTelefono    String?               @db.VarChar(50)
  Ciudad              String?               @db.VarChar(100)
  Estado              String?               @db.VarChar(100)
  Pais                String?               @default("México") @db.VarChar(100)
  UrlSitio            String?               @db.VarChar(500)
  UrlLogo             Bytes?                @db.MediumBlob
  StripeAccountID     String?               @db.VarChar(255)
  enlaceStripe        String?               @db.VarChar(255)
  enlacePayPal        String?               @db.VarChar(255)
  enlaceMercadodePago String?               @db.VarChar(255)
  enlaceConekta       String?               @db.VarChar(255)
  enlaceClip          String?               @db.VarChar(255)
  enlace_OpenpayBBVA  String?               @db.VarChar(255)
  enlace_PayU         String?               @db.VarChar(255)
  enlace_Dashport     String?               @db.VarChar(255)
  AceptaPuntosZ2      Boolean               @default(true)
  MaxPuntosZ2         Int?                  @db.UnsignedInt
  MaxDescuentoZ2      Int?                  @db.UnsignedInt
  PuntosEquivalencia  Int?                  @db.UnsignedInt
  DescuentoImporte    Decimal?              @db.Decimal(10, 2)
  Estatus             organizadores_Estatus @default(pendiente)
  FechaAlta           DateTime?             @default(now()) @db.Timestamp(0)
  FechaActualiza      DateTime?             @default(now()) @db.Timestamp(0)
}

model sec_settings {
  set_name  String  @id @db.VarChar(255)
  set_value String? @db.VarChar(255)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model subscriptions {
  SubscriptionUID     String                         @id @db.Char(36)
  RunnerUID           String                         @db.Char(36)
  PlanCode            subscriptions_PlanCode
  PlanVersion         Int?                           @default(1)
  BillingCycle        subscriptions_BillingCycle     @default(Yearly)
  Status              subscriptions_Status           @default(Pending)
  AutoRenew           Boolean                        @default(true)
  StartAt             DateTime                       @default(now()) @db.Timestamp(0)
  EndAt               DateTime?                      @db.Timestamp(0)
  NextChargeAt        DateTime?                      @db.Timestamp(0)
  LastChargeAt        DateTime?                      @db.Timestamp(0)
  CanceledAt          DateTime?                      @db.Timestamp(0)
  CancelReason        String?                        @db.VarChar(100)
  Currency            String                         @default("MXN") @db.Char(3)
  PriceMXN            Decimal                        @default(200.00) @db.Decimal(10, 2)
  DiscountMXN         Decimal?                       @default(0.00) @db.Decimal(10, 2)
  TaxMXN              Decimal?                       @default(0.00) @db.Decimal(10, 2)
  LastTotalChargedMXN Decimal?                       @default(0.00) @db.Decimal(10, 2)
  PaymentMethod       subscriptions_PaymentMethod?
  PaymentProvider     subscriptions_PaymentProvider?
  PaymentTxnID        String?                        @db.VarChar(64)
  CFDIUUID            String?                        @db.VarChar(36)
  CFDISerie           String?                        @db.VarChar(10)
  CFDIFolio           String?                        @db.VarChar(20)
  Notes               String?                        @db.VarChar(255)
  CreatedAt           DateTime                       @default(now()) @db.Timestamp(0)
  UpdatedAt           DateTime                       @default(now()) @db.Timestamp(0)

  @@index([RunnerUID], map: "FK_subscriptions_runner")
}

model categorias {
  CategoriaID Int    @id @default(autoincrement())
  Nombre      String @db.VarChar(150)
}

model ciudades_mexico {
  CiudadID Int    @id @default(autoincrement())
  Estado   String @db.VarChar(100)
  Ciudad   String @db.VarChar(150)
}

model disciplinas {
  DisciplinaID Int    @id @default(autoincrement())
  Nombre       String @db.VarChar(200)
}

model distancias {
  DistanciaID Int    @id @default(autoincrement())
  Nombre      String @db.VarChar(200)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model equipos {
  OrgID                    Int                           @id @default(autoincrement())
  RunnerUID                String?                       @db.Char(36)
  Logo                     Bytes?                        @db.MediumBlob
  Contacto                 String?                       @db.VarChar(100)
  Celular                  String?                       @db.VarChar(36)
  Correo                   String?                       @db.VarChar(255)
  NombreEquipo             String?                       @db.VarChar(100)
  AliasEquipo              String?                       @db.VarChar(30)
  RFC                      String?                       @db.VarChar(20)
  Descripcion              String?                       @db.VarChar(255)
  Ciudad                   String?                       @db.VarChar(100)
  Estado                   String?                       @db.VarChar(100)
  Pais                     String?                       @default("México") @db.VarChar(100)
  LugarEntrenamiento       String?                       @db.VarChar(255)
  Disciplinas              String?                       @db.LongText
  HorarioEntrenamiento     DateTime?                     @db.Time(0)
  AtletasActivos           Int?                          @default(0)
  EntrenadoresTotales      Int?                          @default(0)
  ProgramasDisponibles     equipos_ProgramasDisponibles? @default(Digital)
  EntrenadoresEspecialidad String?                       @db.VarChar(255)
  NivelEquipo              equipos_NivelEquipo?          @default(Intermedio)
  Certificacion            equipos_Certificacion?        @default(Independiente)
  IntegracionZona2         Boolean?                      @default(false)
  CostoMensual             Decimal?                      @db.Decimal(10, 2)
  ContactoWhatsApp         String?                       @db.VarChar(20)
  RedSocial                String?                       @db.VarChar(255)
  Activo                   Boolean?                      @default(true)
}

model estados_mexico {
  EstadoID Int    @id @default(autoincrement())
  Nombre   String @db.VarChar(100)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model inscripciones {
  InscripcionID        Int                               @id @default(autoincrement()) @db.UnsignedInt
  EventoID             Int                               @db.UnsignedInt
  OrgID                Int                               @db.UnsignedInt
  FechaEvento          DateTime                          @db.Date
  RunnerUID            String                            @db.Char(36)
  RunnerNombre         String?                           @db.VarChar(150)
  RunnerEmail          String?                           @db.VarChar(150)
  RunnerTelefono       String?                           @db.VarChar(50)
  Genero               String?                           @db.Char(1)
  FechaNacimiento      DateTime?                         @db.Date
  TallaPlayera         inscripciones_TallaPlayera?
  EquipoID             String?                           @db.Char(36)
  DistanciaElegida     String                            @db.VarChar(50)
  CategoriaElegida     String?                           @db.VarChar(100)
  Disciplina           String?                           @default("Carrera") @db.VarChar(50)
  PrecioOriginal       Decimal                           @db.Decimal(10, 2)
  PuntosUsados         Int?                              @default(0) @db.UnsignedInt
  DescuentoAplicadoMXN Decimal?                          @default(0.00) @db.Decimal(10, 2)
  PrecioFinal          Decimal                           @db.Decimal(10, 2)
  Moneda               String?                           @default("MXN") @db.Char(3)
  MetodoPago           String?                           @db.VarChar(50)
  PagoTransaccionID    String?                           @db.VarChar(150)
  PagoEstado           inscripciones_PagoEstado?         @default(Pendiente)
  PagoComision         Decimal?                          @db.Decimal(10, 2)
  PagoReciboURL        String?                           @db.VarChar(300)
  ContactoEmergencia   String?                           @db.VarChar(150)
  TelefonoEmergencia   String?                           @db.VarChar(50)
  Ciudad               String?                           @db.VarChar(100)
  Estado               String?                           @db.VarChar(100)
  Pais                 String?                           @db.VarChar(100)
  EstatusInscripcion   inscripciones_EstatusInscripcion? @default(Inscrito)
  bibNumber            String?                           @db.Char(10)
  IPRegistro           String?                           @db.VarChar(50)
  UserAgent            String?                           @db.VarChar(255)
  FechaInscripcion     DateTime                          @default(now()) @db.Timestamp(0)
  FechaActualizacion   DateTime                          @default(now()) @db.Timestamp(0)
}

model paises {
  PaisID Int    @id @default(autoincrement())
  Nombre String @db.VarChar(150)
}

model tokens_sms {
  TokenID         Int               @id @default(autoincrement())
  Telefono        String            @db.VarChar(20)
  Codigo          String            @db.VarChar(6)
  FechaCreacion   DateTime          @default(now()) @db.DateTime(0)
  FechaExpiracion DateTime          @db.DateTime(0)
  Estado          tokens_sms_Estado @default(activo)
  IP              String?           @db.VarChar(45)
  Intentos        Int?              @default(0)

  @@index([Codigo], map: "idx_codigo")
  @@index([Telefono], map: "idx_telefono")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model promociones {
  PromoID          Int                   @id @default(autoincrement()) @db.UnsignedInt
  OrgID            Int                   @db.UnsignedInt
  Titulo           String                @db.VarChar(255)
  Subtitulo        String                @db.MediumText
  Imagen           Bytes?                @db.MediumBlob
  Precio           Decimal               @db.Decimal(10, 2)
  Moneda           String                @default("MXN") @db.Char(3)
  MaxPuntosZ2      Int                   @db.UnsignedInt
  DescuentoImporte Decimal               @db.Decimal(10, 2)
  TipoPromo        promociones_TipoPromo @default(DescuentoZ2)
  QRUnico          String?               @db.VarChar(255)
  FechaInicio      DateTime              @db.Date
  FechaFin         DateTime              @db.Date
  Estatus          promociones_Estatus   @default(Activa)
}

model actividad_ruta {
  ruta_id      Int         @id @default(autoincrement())
  actividad_id Int
  punto_numero Int?
  latitud      Decimal?    @db.Decimal(10, 6)
  longitud     Decimal?    @db.Decimal(10, 6)
  actividades  actividades @relation(fields: [actividad_id], references: [actID], onDelete: Cascade, onUpdate: Restrict, map: "actividad_ruta_ibfk_1")

  @@index([actividad_id], map: "actividad_id")
}

model actividad_ubicacion {
  ubicacion_id Int         @id @default(autoincrement())
  actividad_id Int
  ciudad       String?     @db.VarChar(100)
  inicio_lat   Decimal?    @db.Decimal(10, 6)
  inicio_lon   Decimal?    @db.Decimal(10, 6)
  fin_lat      Decimal?    @db.Decimal(10, 6)
  fin_lon      Decimal?    @db.Decimal(10, 6)
  actividades  actividades @relation(fields: [actividad_id], references: [actID], onDelete: Cascade, onUpdate: Restrict, map: "actividad_ubicacion_ibfk_1")

  @@index([actividad_id], map: "actividad_id")
}

model actividad_zonas {
  zona_id      Int         @id @default(autoincrement())
  actividad_id Int
  zona_numero  Int?
  rango_texto  String?     @db.VarChar(20)
  fue_activa   Boolean?
  actividades  actividades @relation(fields: [actividad_id], references: [actID], onDelete: Cascade, onUpdate: Restrict, map: "actividad_zonas_ibfk_1")

  @@index([actividad_id], map: "actividad_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model pacers {
  PacerID                     Int      @id @default(autoincrement())
  RunnerUID                   String   @db.Char(36)
  NombreCompleto              String   @db.VarChar(255)
  AliasPacer                  String?  @db.VarChar(100)
  Biografia                   String?  @db.Text
  Idiomas                     String?  @db.VarChar(255)
  RitmoMin                    String?  @db.VarChar(20)
  DistanciasDominadas         String?  @db.VarChar(255)
  Certificaciones             String?  @db.VarChar(255)
  CiudadBase                  String?  @db.VarChar(100)
  EstadoBase                  String?  @db.VarChar(100)
  PaisBase                    String?  @default("México") @db.VarChar(100)
  DisponibilidadHoraria       String?  @db.VarChar(255)
  PickUpHotel                 Boolean? @default(false)
  FotoPerfilURL               String?  @db.VarChar(500)
  RedesSociales               String?  @db.VarChar(500)
  CalificacionPromedio        Decimal? @default(0.00) @db.Decimal(3, 2)
  TotalReviews                Int?     @default(0)
  TotalExperienciasRealizadas Int?     @default(0)
  Tarifabase                  Decimal? @db.Decimal(10, 2)
  PacerActivo                 Boolean? @default(true)
  FechaRegistro               DateTime @default(now()) @db.Timestamp(0)
  FechaActualizacion          DateTime @default(now()) @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model rutas {
  RutaID              Int               @id @default(autoincrement()) @db.UnsignedInt
  RunnerUID           String            @db.Char(36)
  NombreRuta          String            @db.VarChar(150)
  Descripcion         String?           @db.Text
  Disciplina          String?           @default("Carrera") @db.VarChar(50)
  DistanciaKM         String            @db.VarChar(50)
  ElevacionM          Int?              @default(0)
  Dificultad          rutas_Dificultad? @default(F_cil)
  DuracionEstimadoMin Int?
  Ciudad              String            @db.VarChar(50)
  Estado              String?           @db.VarChar(50)
  Pais                String?           @db.VarChar(50)
  GoogleMaps          String?           @db.VarChar(255)
  GPXfile             String?           @db.VarChar(255)
  Estatus             rutas_Estatus?    @default(Publica)
  FechaCreacion       DateTime?         @default(now()) @db.DateTime(0)
  FechaActualizacion  DateTime?         @default(now()) @db.Timestamp(0)
}

enum establecimientos_Estatus {
  pendiente
  activo
  suspendido
  baja
}

enum subscriptions_PlanCode {
  Runner
  Pacer
  Visitante
  Organizador
}

enum subscriptions_BillingCycle {
  Monthly
  Quarterly
  Yearly
}

enum subscriptions_Status {
  Pending
  Active
  PastDue
  Canceled
  Expired
  Trial
}

enum subscriptions_PaymentMethod {
  Card
  Bank
  Transfer
  Wallet
  Cash
  Other
}

enum subscriptions_PaymentProvider {
  Stripe
  Conekta
  OpenPay
  PayPal
  Bank
  Internal
  Other
}

enum tokens_sms_Estado {
  activo
  usado
  expirado
  bloqueado
}

enum inscripciones_PagoEstado {
  Pendiente
  Pagado
  Fallido
  Cancelado
  Reembolsado
}

enum equipos_ProgramasDisponibles {
  Manual
  Digital
  Ambos
}

enum equipos_NivelEquipo {
  Recreativo
  Intermedio
  Competitivo
  Elite
}

enum equipos_Certificacion {
  Verificado
  Afiliado
  Independiente
}

enum organizadores_Estatus {
  pendiente
  activo
  suspendido
  baja
}

enum promociones_TipoPromo {
  DescuentoZ2
  ProductoGratis
  DescuentoMixto
}

enum inscripciones_TallaPlayera {
  ExtraChica
  Chica
  Mediana
  Grande
  ExtraGrande
}

enum promociones_Estatus {
  Activa
  Inactiva
  Suspendida
}

enum inscripciones_EstatusInscripcion {
  Inscrito
  Pagado
  Confirmado
  Cancelado
  NoPresentado
}

enum rutas_Dificultad {
  F_cil    @map("Fácil")
  Moderada
  Dif_cil  @map("Difícil")
  Experto
}

enum rutas_Estatus {
  Publica
  Privada
  Oculta
}
